@using System;
@using Sandbox;
@using Sandbox.UI;
@using Sandbox.UI.Construct;
@using Sandbox.UI.GameMenu;

@attribute [StyleSheet]
@inherits Sandbox.UI.NavHostPanel
@implements Sandbox.Menu.IGameMenuPanel

@namespace Home

<root class="gamemainmenu">
    @if(!Game.InGame)
    {
        <HomeMainMenuBackground class="background" />
    }
    <div class="navigator-canvas" slot="navigator-canvas"></div>
</root>

@code
{

    public HomeMainMenu()
    {
        DefaultUrl = "/";

        AddDestination("/", typeof(HomeFrontPage));
        AddDestination("/servers", typeof(HomeServerList));
        AddDestination("/lobby", typeof(HomeLobbyPage));

        BindClass( "ingame", () => Game.InGame );
    }

    [GameEvent.Menu.ServerJoined]
    public void OnServerJoined() => Navigate("/");

    [GameEvent.Menu.LobbyJoined]
    public void OnLobbyJoined() => Navigate("/lobby");

    [GameEvent.Menu.LobbyLeave]
    public void OnLobbyLeave() => Navigate("/");

    [GameEvent.Menu.ServerLeave]
    public void OnServerLeave() => Navigate("/");
	

}